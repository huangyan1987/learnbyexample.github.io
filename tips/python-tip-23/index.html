<!doctype html><html lang=en><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><title>Python tip 23: map, filter and reduce</title><link href=https://learnbyexample.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><script src=https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js></script><link href=https://learnbyexample.github.io/site.css rel=stylesheet><meta content=learnbyexample property=og:title><meta content=website property=og:type><meta content="Learn Python, Regex, Linux, Scripting, Vim, Ebooks, Self-Publishing and Interesting Tech Nuggets." property=og:description><meta content=https://learnbyexample.github.io property=og:url><meta content=https://learnbyexample.github.io/images/learnbyexample.png property=og:image><meta content=1280 property=og:image:width><meta content=640 property=og:image:height><meta content=summary_large_image property=twitter:card><meta content=@learn_byexample property=twitter:site><link href=https://learnbyexample.github.io/favicon.svg rel=icon><link rel="shortcut icon" href=https://learnbyexample.github.io/favicon.png><body><div class=container><div class=mobile-navbar id=mobile-navbar><div class=mobile-header-logo><a class=logo href=/>learnbyexample</a></div><div class="mobile-navbar-icon icon-out"><span></span><span></span><span></span></div></div><nav class="mobile-menu slideout-menu slideout-menu-left" id=mobile-menu><ul class=mobile-menu-list><li class=mobile-menu-item><a href=https://learnbyexample.github.io/books> Books </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/mini> Mini </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/tips> Tips </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/tags> Tags </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/about> About </a></ul></nav><header id=header><div class=logo><a href=https://learnbyexample.github.io>learnbyexample</a></div><nav class=menu><ul><li><a href=https://learnbyexample.github.io/books> Books </a><li><a href=https://learnbyexample.github.io/mini> Mini </a><li><a href=https://learnbyexample.github.io/tips> Tips </a><li><a href=https://learnbyexample.github.io/tags> Tags </a><li><a href=https://learnbyexample.github.io/about> About </a></ul></nav></header><main><div class=content id=mobile-panel><article class=post><header class=post__header><h1 class=post__title><a href=https://learnbyexample.github.io/tips/python-tip-23/>Python tip 23: map, filter and reduce</a></h1><div class=post__meta><span class=post__time>2023-02-07</span></div></header><div class=post-content><p>Many operations on container objects can be defined in terms of these three concepts. For example, if you want to sum the square of all even numbers:<ul><li>separating out even numbers is <strong>Filter</strong> (i.e. only elements that satisfy a condition are retained)<li>square of such numbers is <strong>Map</strong> (i.e. each element is transformed by a mapping function)<li>final sum is <strong>Reduce</strong> (i.e. you get one value out of multiple values)</ul><p>One or more of these operations may be absent depending on the problem statement. Each of these steps will be first illustrated using straightforward code and then the equivalent list comprehensions (and generator expressions) are also shown.<p>The first of these steps could look like:<pre class=language-python data-lang=python style=background-color:#f5f5f5;color:#1f1f1f;><code class=language-python data-lang=python><span style=color:#72ab00;>>>> </span><span style=background-color:#562d56bf;color:#f8f8f8;>def</span><span> </span><span style=color:#5597d6;>get_evens</span><span>(iterable):
</span><span style=color:#b3933a;>...     </span><span>op </span><span style=color:#72ab00;>= </span><span>[]
</span><span style=color:#b3933a;>...     </span><span style=color:#72ab00;>for </span><span>n </span><span style=color:#72ab00;>in </span><span>iterable:
</span><span style=color:#b3933a;>...         </span><span style=color:#72ab00;>if </span><span>n </span><span style=color:#72ab00;>% </span><span style=color:#b3933a;>2 </span><span style=color:#72ab00;>== </span><span style=color:#b3933a;>0</span><span>:
</span><span style=color:#b3933a;>...             </span><span>op.</span><span style=color:#5597d6;>append</span><span>(n)
</span><span style=color:#b3933a;>...     </span><span style=color:#72ab00;>return </span><span>op
</span><span style=color:#b3933a;>... 
</span><span style=color:#72ab00;>>>> </span><span>nums </span><span style=color:#72ab00;>= </span><span>[</span><span style=color:#b3933a;>100</span><span>, </span><span style=color:#b3933a;>53</span><span>, </span><span style=color:#b3933a;>32</span><span>, </span><span style=color:#b3933a;>0</span><span>, </span><span style=color:#b3933a;>11</span><span>, </span><span style=color:#b3933a;>5</span><span>, </span><span style=color:#b3933a;>2</span><span>]
</span><span style=color:#72ab00;>>>> </span><span style=color:#5597d6;>get_evens</span><span>(nums)
</span><span>[</span><span style=color:#b3933a;>100</span><span>, </span><span style=color:#b3933a;>32</span><span>, </span><span style=color:#b3933a;>0</span><span>, </span><span style=color:#b3933a;>2</span><span>]
</span><span>
</span><span style=color:#72ab00;>>>> </span><span>[n </span><span style=color:#72ab00;>for </span><span>n </span><span style=color:#72ab00;>in </span><span>nums </span><span style=color:#72ab00;>if </span><span>n </span><span style=color:#72ab00;>% </span><span style=color:#b3933a;>2 </span><span style=color:#72ab00;>== </span><span style=color:#b3933a;>0</span><span>]
</span><span>[</span><span style=color:#b3933a;>100</span><span>, </span><span style=color:#b3933a;>32</span><span>, </span><span style=color:#b3933a;>0</span><span>, </span><span style=color:#b3933a;>2</span><span>]
</span></code></pre><p>The second step could be:<pre class=language-python data-lang=python style=background-color:#f5f5f5;color:#1f1f1f;><code class=language-python data-lang=python><span style=color:#72ab00;>>>> </span><span style=background-color:#562d56bf;color:#f8f8f8;>def</span><span> </span><span style=color:#5597d6;>sqr_evens</span><span>(iterable):
</span><span style=color:#b3933a;>...     </span><span>op </span><span style=color:#72ab00;>= </span><span>[]
</span><span style=color:#b3933a;>...     </span><span style=color:#72ab00;>for </span><span>n </span><span style=color:#72ab00;>in </span><span>iterable:
</span><span style=color:#b3933a;>...         </span><span style=color:#72ab00;>if </span><span>n </span><span style=color:#72ab00;>% </span><span style=color:#b3933a;>2 </span><span style=color:#72ab00;>== </span><span style=color:#b3933a;>0</span><span>:
</span><span style=color:#b3933a;>...             </span><span>op.</span><span style=color:#5597d6;>append</span><span>(n </span><span style=color:#72ab00;>* </span><span>n)
</span><span style=color:#b3933a;>...     </span><span style=color:#72ab00;>return </span><span>op
</span><span style=color:#b3933a;>... 
</span><span style=color:#72ab00;>>>> </span><span style=color:#5597d6;>sqr_evens</span><span>(nums)
</span><span>[</span><span style=color:#b3933a;>10000</span><span>, </span><span style=color:#b3933a;>1024</span><span>, </span><span style=color:#b3933a;>0</span><span>, </span><span style=color:#b3933a;>4</span><span>]
</span><span>
</span><span style=color:#72ab00;>>>> </span><span>[n </span><span style=color:#72ab00;>* </span><span>n </span><span style=color:#72ab00;>for </span><span>n </span><span style=color:#72ab00;>in </span><span>nums </span><span style=color:#72ab00;>if </span><span>n </span><span style=color:#72ab00;>% </span><span style=color:#b3933a;>2 </span><span style=color:#72ab00;>== </span><span style=color:#b3933a;>0</span><span>]
</span><span>[</span><span style=color:#b3933a;>10000</span><span>, </span><span style=color:#b3933a;>1024</span><span>, </span><span style=color:#b3933a;>0</span><span>, </span><span style=color:#b3933a;>4</span><span>]
</span></code></pre><p>And finally, the third step could be:<pre class=language-python data-lang=python style=background-color:#f5f5f5;color:#1f1f1f;><code class=language-python data-lang=python><span style=color:#72ab00;>>>> </span><span style=background-color:#562d56bf;color:#f8f8f8;>def</span><span> </span><span style=color:#5597d6;>sum_sqr_evens</span><span>(iterable):
</span><span style=color:#b3933a;>...     </span><span>total </span><span style=color:#72ab00;>= </span><span style=color:#b3933a;>0
</span><span style=color:#b3933a;>...     </span><span style=color:#72ab00;>for </span><span>n </span><span style=color:#72ab00;>in </span><span>iterable:
</span><span style=color:#b3933a;>...         </span><span style=color:#72ab00;>if </span><span>n </span><span style=color:#72ab00;>% </span><span style=color:#b3933a;>2 </span><span style=color:#72ab00;>== </span><span style=color:#b3933a;>0</span><span>:
</span><span style=color:#b3933a;>...             </span><span>total </span><span style=color:#72ab00;>+= </span><span>n </span><span style=color:#72ab00;>* </span><span>n
</span><span style=color:#b3933a;>...     </span><span style=color:#72ab00;>return </span><span>total
</span><span style=color:#b3933a;>... 
</span><span style=color:#72ab00;>>>> </span><span style=color:#5597d6;>sum_sqr_evens</span><span>(nums)
</span><span style=color:#b3933a;>11028
</span><span>
</span><span style=color:#72ab00;>>>> </span><span style=color:#b39f04;>sum</span><span>(n </span><span style=color:#72ab00;>* </span><span>n </span><span style=color:#72ab00;>for </span><span>n </span><span style=color:#72ab00;>in </span><span>nums </span><span style=color:#72ab00;>if </span><span>n </span><span style=color:#72ab00;>% </span><span style=color:#b3933a;>2 </span><span style=color:#72ab00;>== </span><span style=color:#b3933a;>0</span><span>)
</span><span style=color:#b3933a;>11028
</span></code></pre><p><img alt=info src=/images/info.svg> You can also use <a href=https://docs.python.org/3/library/functions.html#map>map()</a>, <a href=https://docs.python.org/3/library/functions.html#filter>filter()</a> and <a href=https://docs.python.org/3/library/functools.html#functools.reduce>functools.reduce()</a> for such problems.<p><strong>Video demo</strong>:<p align=center><iframe allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" title="YouTube video player" allowfullscreen frameborder=0 height=315 loading=lazy src=https://www.youtube.com/embed/jB4cazhpThA width=560></iframe></p><br><p><img alt=info src=/images/info.svg> See also my <a href=https://github.com/learnbyexample/100_page_python_intro>100 Page Python Intro</a> ebook.</div><div class=post-footer><div class=post-tags><a href=https://learnbyexample.github.io/tags/python/>#python</a><a href=https://learnbyexample.github.io/tags/tip/>#tip</a></div><hr color=#e6e6e6><div class=post-nav><p><a class=previous href=https://learnbyexample.github.io/tips/python-tip-24/>← Python tip 24: modifying list using insert and slice</a><br><p><a class=next href=https://learnbyexample.github.io/tips/python-tip-22/>Python tip 22: possessive quantifiers →</a><br></div><hr color=#e6e6e6><p>📰 Use <a href=https://learnbyexample.github.io/atom.xml>this link</a> for the Atom feed. <br> ✅ Follow me on <a href=https://twitter.com/learn_byexample>Twitter</a>, <a href=https://github.com/learnbyexample>GitHub</a> and <a href=https://www.youtube.com/c/learnbyexample42>Youtube</a> for interesting tech nuggets. <br> 📧 Subscribe to <a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>learnbyexample weekly</a> for programming resources, tips, tools, free ebooks and more (free newsletter, delivered every Friday).<hr color=#e6e6e6></div></article></div></main></div><script src=https://learnbyexample.github.io/even.js></script>